<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="èƒŒæ™¯é¡¹ç›®ä¸­ç”¨åˆ°äº†æœ¬åœ°ç™»å½•å­˜å‚¨cookieï¼Œå†è¿›è¡ŒwebViewè¯·æ±‚æ—¶é—´å¸¦ä¸Šcookieçš„åŠŸèƒ½ã€‚ä¸æ˜¯å¾ˆæ¸…æ™°é€»è¾‘ï¼Œäºæ˜¯å­¦ä¹ äº†è§£äº†ä¸‹iOSä¸­cookieçš„ä½¿ç”¨ï¼Œåšä¸ªå°ç»“ã€‚è·³è¿‡æ¦‚å¿µç›´æ¥çœ‹ä½¿ç”¨ğŸŒ°">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="Cookie in iOS">
<meta property="og:url" content="http://jake.gift/2017/01/12/cookie-in-iOS/index.html">
<meta property="og:site_name" content="ColdCode">
<meta property="og:description" content="èƒŒæ™¯é¡¹ç›®ä¸­ç”¨åˆ°äº†æœ¬åœ°ç™»å½•å­˜å‚¨cookieï¼Œå†è¿›è¡ŒwebViewè¯·æ±‚æ—¶é—´å¸¦ä¸Šcookieçš„åŠŸèƒ½ã€‚ä¸æ˜¯å¾ˆæ¸…æ™°é€»è¾‘ï¼Œäºæ˜¯å­¦ä¹ äº†è§£äº†ä¸‹iOSä¸­cookieçš„ä½¿ç”¨ï¼Œåšä¸ªå°ç»“ã€‚è·³è¿‡æ¦‚å¿µç›´æ¥çœ‹ä½¿ç”¨ğŸŒ°">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://ojam5z7vg.bkt.clouddn.com/coldreading/jpg/cookie%E5%B7%A5%E4%BD%9C.png-blog">
<meta property="og:image" content="http://ojam5z7vg.bkt.clouddn.com/coldreading/jpg/setcookie%E9%A6%96%E9%83%A81.png-blog">
<meta property="og:image" content="http://ojam5z7vg.bkt.clouddn.com/coldreading/jpg/setcookie%E9%A6%96%E9%83%A82.png-blog">
<meta property="og:image" content="http://ojam5z7vg.bkt.clouddn.com/coldreading/jpg/setcookie2%E9%A6%96%E9%83%A8.png-blog">
<meta property="og:updated_time" content="2017-10-06T07:15:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cookie in iOS">
<meta name="twitter:description" content="èƒŒæ™¯é¡¹ç›®ä¸­ç”¨åˆ°äº†æœ¬åœ°ç™»å½•å­˜å‚¨cookieï¼Œå†è¿›è¡ŒwebViewè¯·æ±‚æ—¶é—´å¸¦ä¸Šcookieçš„åŠŸèƒ½ã€‚ä¸æ˜¯å¾ˆæ¸…æ™°é€»è¾‘ï¼Œäºæ˜¯å­¦ä¹ äº†è§£äº†ä¸‹iOSä¸­cookieçš„ä½¿ç”¨ï¼Œåšä¸ªå°ç»“ã€‚è·³è¿‡æ¦‚å¿µç›´æ¥çœ‹ä½¿ç”¨ğŸŒ°">
<meta name="twitter:image" content="http://ojam5z7vg.bkt.clouddn.com/coldreading/jpg/cookie%E5%B7%A5%E4%BD%9C.png-blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://jake.gift/2017/01/12/cookie-in-iOS/"/>





  <title>Cookie in iOS | ColdCode</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ColdCode</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">æ‰˜èµ·ä¸€ç‰‡ç»¿å¶ï¼Œèµ°å‘æ›´è¿œçš„è¿œæ–¹</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/2016/12/29/çŸ¥è¯†ä¼ é€é—¨/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            ç«™ç‚¹åœ°å›¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jake.gift/2017/01/12/cookie-in-iOS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jakey_yang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ColdCode">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Cookie in iOS</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-01-12T16:37:13+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/çŒ¿çŒ¿å…»æˆè®°/" itemprop="url" rel="index">
                    <span itemprop="name">çŒ¿çŒ¿å…»æˆè®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>é¡¹ç›®ä¸­ç”¨åˆ°äº†æœ¬åœ°ç™»å½•å­˜å‚¨cookieï¼Œå†è¿›è¡ŒwebViewè¯·æ±‚æ—¶é—´å¸¦ä¸Šcookieçš„åŠŸèƒ½ã€‚ä¸æ˜¯å¾ˆæ¸…æ™°é€»è¾‘ï¼Œäºæ˜¯å­¦ä¹ äº†è§£äº†ä¸‹iOSä¸­cookieçš„ä½¿ç”¨ï¼Œåšä¸ªå°ç»“ã€‚è·³è¿‡æ¦‚å¿µç›´æ¥çœ‹<a href="#example">ä½¿ç”¨ğŸŒ°</a></p>
<a id="more"></a>
<h3 id="Cookieä»‹ç»"><a href="#Cookieä»‹ç»" class="headerlink" title="Cookieä»‹ç»"></a>Cookieä»‹ç»</h3><p>Cookieåˆ†ç±»ä¸¤ç±»ï¼š</p>
<ul>
<li>ä¼šè¯cookie</li>
<li>æŒä¹…cookie</li>
</ul>
<p>ä¼šè¯ cookie å’ŒæŒä¹… cookie ä¹‹é—´å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å®ƒä»¬çš„è¿‡æœŸæ—¶é—´ã€‚</p>
<p><strong>cookieå¦‚ä½•å·¥ä½œ</strong></p>
<p>cookie ä¸­åŒ…å«äº†ä¸€ä¸ªç”± åå­— = å€¼ ï¼ˆname=valueï¼‰ è¿™æ ·çš„ä¿¡æ¯æ„æˆçš„ä»»æ„åˆ—è¡¨ï¼Œå¹¶é€šè¿‡ Set-Cookie æˆ– Set-Cookie2 HTTP å“åº”ï¼ˆæ‰© å±•ï¼‰é¦–éƒ¨å°†å…¶è´´åˆ°ç”¨æˆ·èº«ä¸Šå»ã€‚<br><img src="http://ojam5z7vg.bkt.clouddn.com/coldreading/jpg/cookie%E5%B7%A5%E4%BD%9C.png-blog" alt="cookieå·¥ä½œ"></p>
<p><strong>cookieç»„æˆ</strong><br>ç°åœ¨ä½¿ç”¨çš„ cookie è§„èŒƒæœ‰ä¸¤ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼šcookies ç‰ˆæœ¬ 0ï¼ˆæœ‰æ—¶è¢«ç§°ä¸º Netscape cookiesï¼‰ å’Œ cookies ç‰ˆ æœ¬ 1ï¼ˆRFC 2965ï¼‰ ã€‚ cookies ç‰ˆ æœ¬ 1 æ˜¯ å¯¹ cookies ç‰ˆ æœ¬ 0 çš„ æ‰© å±•ï¼Œåº”ç”¨ä¸å¦‚åè€…å¹¿æ³›ã€‚</p>
<ul>
<li><p><strong>cookieç‰ˆæœ¬0</strong></p>
<ul>
<li><p>Set-Cookie é¦–éƒ¨<br>Set-Cookie é¦–éƒ¨æœ‰ä¸€ä¸ªå¼ºåˆ¶æ€§çš„cookieåå’Œcookieå€¼ã€‚åé¢è·Ÿç€å¯é€‰çš„cookie å±æ€§ï¼Œä¸­é—´ç”±åˆ†å·åˆ†éš”ã€‚<br><img src="http://ojam5z7vg.bkt.clouddn.com/coldreading/jpg/setcookie%E9%A6%96%E9%83%A81.png-blog" alt=""><br><img src="http://ojam5z7vg.bkt.clouddn.com/coldreading/jpg/setcookie%E9%A6%96%E9%83%A82.png-blog" alt=""></p>
</li>
<li><p>cookie 0é¦–éƒ¨:</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cookie: session-id=002-1145265-8016838; session-id-time=1007884800</div></pre></td></tr></table></figure>
<ul>
<li><p><strong>cookieç‰ˆæœ¬1</strong> </p>
<ul>
<li><p>Set-Cookie2é¦–éƒ¨<br>è¿™ä¸ªç‰ˆæœ¬ 1 æ ‡å‡†å¼•å…¥äº†Set-Cookie2é¦–éƒ¨å’ŒCookie2é¦–éƒ¨ï¼Œä½†å®ƒä¹Ÿèƒ½äºç‰ˆæœ¬0è¿›è¡Œäº¤äº’æ“ä½œã€‚<br><img src="http://ojam5z7vg.bkt.clouddn.com/coldreading/jpg/setcookie2%E9%A6%96%E9%83%A8.png-blog" alt=""></p>
</li>
<li><p>cookie 1é¦–éƒ¨:</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Cookie: $Version=&quot;1&quot;;</div><div class="line">ID=&quot;29046&quot;; $Domain=&quot;.joes-hardware.com&quot;;</div><div class="line">color=&quot;blue&quot;;</div><div class="line">Coupon=&quot;hammer027&quot;; $Path=&quot;/tools&quot;;</div><div class="line">Coupon=&quot;handvac103&quot;; $Path=&quot;/tools/cordless&quot;</div></pre></td></tr></table></figure>
<h3 id="NSHTTPCookieStorage"><a href="#NSHTTPCookieStorage" class="headerlink" title="NSHTTPCookieStorage"></a>NSHTTPCookieStorage</h3><blockquote>
<p>NSHTTPCookieStorage implements a singleton object (shared instance) that manages storage of cookies. Each cookie is represented by an instance of the NSHTTPCookie class. As a rule, cookies are shared among all applications and are kept in sync across process boundaries. Session cookies (where the cookie objectâ€™s sessionOnly method returns YES) are local to a single process and are not shared.</p>
</blockquote>
<p><code>NSHTTPCookieStorage</code>çš„å®ç°æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œç®¡ç†ç€<code>NSHTTPCookie</code>å¯¹è±¡ï¼Œä¼šè¯cookieçš„ <code>sessionOnly</code>æ–¹æ³•è¿”å›<code>YES</code>å°±ä¸å¯åœ¨è¿›ç¨‹é—´å…±äº«ã€‚</p>
<p>ç„¶è€Œè‹¹æœåœ¨è¿™ä¸ªç±»çš„API Referenceä¸­å†™äº†ä¸€ä¸ª<code>iOS Note</code>ï¼š</p>
<blockquote>
<p>Cookies are not shared among applications in iOS.</p>
</blockquote>
<ul>
<li><p><strong>iOS</strong>ä¸­cookieä¸èƒ½è·¨åº”ç”¨å…±äº«</p>
</li>
<li><p><strong>MacOS</strong>ä¸­<code>sessionOnly</code>ä¸ä¸º<code>YES</code>æ˜¯å¯ä»¥è¢«å…±äº«çš„</p>
</li>
</ul>
<p><code>NSHTTPCookieStorage</code>å¯ä»¥ç®¡ç†cookieçš„æ¥å—ç­–ç•¥ï¼Œåœ¨ä¸€ä¸ªappä¸­æ”¹å˜cookieçš„æ¥å—ç­–ç•¥å°†ä¼šå½±å“å…¶ä»–æ­£åœ¨è¿è¡Œçš„appçš„cookieæ¥å—ç­–ç•¥ã€‚</p>
<p>å½“å…¶ä»–çš„appä¿®æ”¹äº†cookieå­˜å‚¨ æˆ–è€… cookieæ¥å—ç­–ç•¥ï¼ŒNSHTTPCookieStorageå°†ä¼šç»™appå‘é€<code>NSHTTPCookieManagerCookiesChangedNotification</code>æˆ–è€…<code>NSHTTPCookieStorageAcceptPolicyChangedNotification</code>é€šçŸ¥</p>
<p><strong>Cookieæ¥å—ç­–ç•¥ï¼š</strong><br><code>NSHTTPCookieAcceptPolicy</code></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSUInteger</span>, <span class="built_in">NSHTTPCookieAcceptPolicy</span>) &#123;</div><div class="line">    <span class="built_in">NSHTTPCookieAcceptPolicyAlways</span>,<span class="comment">//é»˜è®¤ç­–ç•¥ï¼Œæ¥å—æ‰€æœ‰çš„cookies</span></div><div class="line">    <span class="built_in">NSHTTPCookieAcceptPolicyNever</span>,<span class="comment">//æ‹’ç»æ‰€æœ‰çš„cookies</span></div><div class="line">    <span class="built_in">NSHTTPCookieAcceptPolicyOnlyFromMainDocumentDomain</span><span class="comment">//åªä»ä¸»æ–‡æ¡£åŸŸåæ¥å—cookies</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="NSHTTPCookie"><a href="#NSHTTPCookie" class="headerlink" title="NSHTTPCookie"></a>NSHTTPCookie</h3><blockquote>
<p>An NSHTTPCookie object represents an HTTP cookie. It is an immutable object, initialized from a dictionary containing the cookie attributes.</p>
</blockquote>
<p><code>NSHTTPCookie</code>å¯¹è±¡ä¸­åŒ…å«äº†HTTP çš„cookieå¯¹è±¡ï¼Œä»åŒ…å«cookieå­—æ®µçš„å­—å…¸åˆå§‹åŒ–åˆ›å»ºã€‚</p>
<blockquote>
<p>The NSHTTPCookie class encapsulates a cookie, providing accessors for many of the common cookie attributes. This class also provides methods to convert HTTP cookie headers to NSHTTPCookie instances and convert an NSHTTPCookie instance to headers suitable for use with an NSURLRequest object. The URL loading system automatically sends any stored cookies appropriate for an NSURLRequest object unless the request specifies not to send cookies. Likewise, cookies returned in an NSURLResponse object are accepted in accordance with the current cookie acceptance policy.</p>
</blockquote>
<p><code>NSHTTPCookie</code>ç±»å°è£…äº†ä¸€ä¸ªHTTP Cookieï¼Œå¹¶æä¾›å¸¸è§çš„Cookieå±æ€§è®¿é—®æ¥å£ã€‚<code>NSHTTPCookie</code>å¯ä»¥è½¬æ¢HTTP CookieæˆNSHTTPCookieså¯¹è±¡ï¼Œå¹¶å¯ä»¥å°†NSHTTPCookieå¯¹è±¡è½¬åŒ–ä¸ºNSURLRequestå¯¹è±¡çš„è¯·æ±‚å¤´éƒ¨åˆ†ã€‚URL loading system ä¼šè‡ªåŠ¨åœ°ç»™NSURLRequestå¯¹è±¡å‘é€å­˜å‚¨çš„cookieï¼Œé™¤éNSURLRequestå¯¹è±¡æŒ‡å®šä¸éœ€è¦ä¼ cookieï¼ŒåŒæ ·cookieåœ¨NSURLRequestä¸­è¿”å›ä¹ŸæŒ‰ç…§å½“å‰çš„cookieæ¥å—ç­–ç•¥æ¥æ”¶ã€‚</p>
<h3 id="Cookieä½¿ç”¨ğŸ’ªä¸ªğŸŒ°"><a href="#Cookieä½¿ç”¨ğŸ’ªä¸ªğŸŒ°" class="headerlink" title="Cookieä½¿ç”¨ğŸ’ªä¸ªğŸŒ°"></a><span id="example">Cookieä½¿ç”¨ğŸ’ªä¸ªğŸŒ°</span></h3><p>Cookieç”Ÿæˆçš„æœ‰ä¸¤ä¸ªé€”å¾„ï¼Œä¸€ä¸ªæ˜¯è®¿é—®ä¸€ä¸ªç½‘é¡µï¼Œè¿™ä¸ªç½‘é¡µè¿”å›çš„HTTP Headerä¸­æœ‰Set-CookieæŒ‡ä»¤è¿›è¡ŒCookieçš„è®¾ç½®ï¼Œè¿™é‡ŒCookieçš„æœ¬åœ°å¤„ç†å…¶å®æ˜¯ç”±WebKitè¿›è¡Œçš„ï¼›è¿˜æœ‰ä¸€ç§é€”å¾„å°±æ˜¯å®¢æˆ·ç«¯é€šè¿‡ä»£ç æ‰‹åŠ¨è®¾ç½®Cookieã€‚</p>
<p>å€¼å¾—æ³¨æ„<a href="http://geeklu.com/2013/04/ios-cookie/" target="_blank" rel="external">iOS Cookieä½¿ç”¨</a>æåˆ°ï¼š<br>NSHTTPCookieStorageå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼ŒsetCookieæˆ–è€…deleteCookieåå¹¶ä¸ä¼šç«‹å³è¿›è¡ŒæŒä¹…åŒ–ï¼Œè€Œæ˜¯æœ‰å‡ ç§’çš„å»¶è¿Ÿã€‚ä¸ºäº†å¯é æ€§ï¼Œæˆ‘ä»¬ä¼šå°†cookieä¿¡æ¯ä¿å­˜ä¸€ä»½åˆ°User Defaultsï¼Œéœ€è¦ç”¨çš„æ—¶å€™loadè¿›æ¥ã€‚</p>
<ul>
<li>å®¢æˆ·ç«¯æ‰‹åŠ¨è®¾ç½®Cookie</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSMutableDictionary</span> *cookieProperties = [<span class="built_in">NSMutableDictionary</span> dictionary];</div><div class="line">[cookieProperties setObject:<span class="string">@"name"</span> forKey:<span class="built_in">NSHTTPCookieName</span>];</div><div class="line">[cookieProperties setObject:<span class="string">@"value"</span> forKey:<span class="built_in">NSHTTPCookieValue</span>];</div><div class="line">[cookieProperties setObject:<span class="string">@"www.taobao.com"</span> forKey:<span class="built_in">NSHTTPCookieDomain</span>];</div><div class="line">[cookieProperties setObject:<span class="string">@"/"</span> forKey:<span class="built_in">NSHTTPCookiePath</span>];</div><div class="line">[cookieProperties setObject:<span class="string">@"0"</span> forKey:<span class="built_in">NSHTTPCookieVersion</span>];</div><div class="line">[cookieProperties setObject:<span class="string">@"30000"</span> forKey:<span class="built_in">NSHTTPCookieMaximumAge</span>];</div><div class="line"><span class="built_in">NSHTTPCookie</span> *cookie = [<span class="built_in">NSHTTPCookie</span> cookieWithProperties:cookieProperties];</div><div class="line">[[<span class="built_in">NSHTTPCookieStorage</span> sharedHTTPCookieStorage] setCookie:cookie];</div><div class="line"><span class="comment">//åˆ é™¤cookieçš„æ–¹æ³•ä¸ºdeleteCookie:</span></div></pre></td></tr></table></figure>
<p>åœ¨é€šè¿‡setCookie:è¿›è¡Œè®¾ç½®cookieçš„æ—¶å€™ï¼Œä¼šè¦†ç›–name,domain,pathéƒ½ç›¸åŒçš„cookieçš„ã€‚<br>è‡³äºcookieä¼šä¸ä¼šæŒä¹…åŒ–åˆ°cookieæ–‡ä»¶ä¸­ä¸»è¦çœ‹è¿™ä¸ªcookieçš„ç”Ÿå‘½å‘¨æœŸï¼Œå’ŒMax-Ageæˆ–è€…Expiresæœ‰å…³ã€‚</p>
<ul>
<li>é€šè¿‡HTTP Headerçš„Set-Cookieåè€…Set-Cookie2è®¾ç½®Cookie</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//è¯·æ±‚ä¸€ä¸ªç½‘å€ï¼Œå³å¯åˆ†é…åˆ°cookie</span></div><div class="line">    AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];</div><div class="line">    manager.responseSerializer = [AFJSONResponseSerializer new];</div><div class="line">    [manager GET:urlString parameters:<span class="literal">nil</span> success:^(AFHTTPRequestOperation *operation, <span class="keyword">id</span> responseObject) &#123;</div><div class="line"> </div><div class="line">        <span class="comment">//è·å–cookie</span></div><div class="line">        <span class="built_in">NSArray</span> *cookies = [[<span class="built_in">NSHTTPCookieStorage</span> sharedHTTPCookieStorage] cookies];</div><div class="line">        </div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">         * æŠŠcookieè¿›è¡Œå½’æ¡£å¹¶è½¬æ¢ä¸ºNSDataç±»å‹</span></div><div class="line"><span class="comment">         * æ³¨æ„ï¼šcookieä¸èƒ½ç›´æ¥è½¬æ¢ä¸ºNSDataç±»å‹ï¼Œå¦åˆ™ä¼šå¼•èµ·å´©æºƒã€‚</span></div><div class="line"><span class="comment">         * æ‰€ä»¥å…ˆè¿›è¡Œå½’æ¡£å¤„ç†ï¼Œå†è½¬æ¢ä¸ºData</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <span class="built_in">NSData</span> *cookiesData = [<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject: [[<span class="built_in">NSHTTPCookieStorage</span> sharedHTTPCookieStorage] cookies]];</div><div class="line"> </div><div class="line">        <span class="comment">//å­˜å‚¨å½’æ¡£åçš„cookie</span></div><div class="line">        <span class="built_in">NSUserDefaults</span> *userDefaults = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</div><div class="line">        [userDefaults setObject: cookiesData forKey: <span class="string">@"cookie"</span>];</div><div class="line">        [<span class="keyword">self</span> setCookie];</div><div class="line">        </div><div class="line">    &#125; failure:^(AFHTTPRequestOperation *operation, <span class="built_in">NSError</span> *error) &#123;</div><div class="line"> </div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    - (<span class="keyword">void</span>)setCookie</div><div class="line">&#123;</div><div class="line">    <span class="comment">//å–å‡ºä¿å­˜çš„cookie</span></div><div class="line">    <span class="built_in">NSUserDefaults</span> *userDefaults = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</div><div class="line"> </div><div class="line">    <span class="comment">//å¯¹å–å‡ºçš„cookieè¿›è¡Œåå½’æ¡£å¤„ç†</span></div><div class="line">    <span class="built_in">NSArray</span> *cookies = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:[userDefaults objectForKey:<span class="string">@"cookie"</span>]];</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (cookies) &#123;</div><div class="line">        <span class="comment">//è®¾ç½®cookie</span></div><div class="line">        <span class="built_in">NSHTTPCookieStorage</span> *cookieStorage = [<span class="built_in">NSHTTPCookieStorage</span> sharedHTTPCookieStorage];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">id</span> cookie <span class="keyword">in</span> cookies) &#123;</div><div class="line">            [cookieStorage setCookie:(<span class="built_in">NSHTTPCookie</span> *)cookie];</div><div class="line">        &#125;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"æ— cookie"</span>);</div><div class="line">   &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://developer.apple.com/reference/foundation/nshttpcookiestorage" target="_blank" rel="external">NSHTTPCookieStorage</a></p>
<p><a href="https://developer.apple.com/library/prerelease/content/documentation/Cocoa/Conceptual/URLLoadingSystem/CookiesandCustomProtocols/CookiesandCustomProtocols.html" target="_blank" rel="external">Cookies and Custom Protocols</a></p>
<p><a href="http://geeklu.com/2013/04/ios-cookie/" target="_blank" rel="external">http://geeklu.com/2013/04/ios-cookie/</a></p>
<p><a href="http://blog.it985.com/11248.html" target="_blank" rel="external">http://blog.it985.com/11248.html</a></p>
<p><em>ã€ŠHTTP æƒå¨æŒ‡å—ã€‹ç¬¬11ç«  å®¢æˆ·ç«¯è¯†åˆ«ä¸cookieæœºåˆ¶</em></p>
<h3 id="ç›¸å…³å¯¼å¼•"><a href="#ç›¸å…³å¯¼å¼•" class="headerlink" title="ç›¸å…³å¯¼å¼•"></a>ç›¸å…³å¯¼å¼•</h3><p>è§£å†³UIWebViewå’ŒWKWebViewä¹‹é—´çš„cookieå…±äº«é—®é¢˜ï¼š</p>
<p><a href="https://fengqiangboy.com/14611518603473.html" target="_blank" rel="external">iOSå¼€å‘-æ‰“é€šUIWebViewå’ŒWKWebViewçš„Cookie</a></p>

      
    </div>
    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>
    Jakey_yang
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="http://jake.gift/2017/01/12/cookie-in-iOS/" title="Cookie in iOS">http://jake.gift/2017/01/12/cookie-in-iOS/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>
    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/01/10/Objective-Cä¸­çš„è£…é¥°æ¨¡å¼/" rel="next" title="Objective-Cä¸­çš„è£…é¥°æ¨¡å¼">
                <i class="fa fa-chevron-left"></i> Objective-Cä¸­çš„è£…é¥°æ¨¡å¼
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/01/19/Swiftçš„weak-unowned-unowned-unsafe/" rel="prev" title="Swiftçš„weak Unowned Unowned(unsafe)">
                Swiftçš„weak Unowned Unowned(unsafe) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "1",
        "bdMiniList": false,
        "bdPic": ""
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "åˆ†äº«åˆ°ï¼š",
        "viewSize": "16"
      },
      "slide": {
        "bdImg": "5",
        "bdPos": "left",
        "bdTop": "100"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Jakey_yang" />
          <p class="site-author-name" itemprop="name">Jakey_yang</p>
           
              <p class="site-description motion-element" itemprop="description">è®°å½•ç”Ÿæ´»å·¥ä½œ</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">32</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#èƒŒæ™¯"><span class="nav-number">1.</span> <span class="nav-text">èƒŒæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookieä»‹ç»"><span class="nav-number">2.</span> <span class="nav-text">Cookieä»‹ç»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSHTTPCookieStorage"><span class="nav-number">3.</span> <span class="nav-text">NSHTTPCookieStorage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSHTTPCookie"><span class="nav-number">4.</span> <span class="nav-text">NSHTTPCookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookieä½¿ç”¨ğŸ’ªä¸ªğŸŒ°"><span class="nav-number">5.</span> <span class="nav-text">Cookieä½¿ç”¨ğŸ’ªä¸ªğŸŒ°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å‚è€ƒ"><span class="nav-number">6.</span> <span class="nav-text">å‚è€ƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç›¸å…³å¯¼å¼•"><span class="nav-number">7.</span> <span class="nav-text">ç›¸å…³å¯¼å¼•</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jakey_yang</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
