<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.yangjie.hu","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":null,"activeClass":"disqus"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="NSDistionaryæ˜¯éå¸¸ç†Ÿæ‚‰å¸¸ç”¨çš„ä¸€ä¸ªFoundationä¸­çš„ç±»ï¼Œæœ€æ˜¾è‘—çš„å‡ ä¸ªç‰¹ç‚¹æ˜¯ï¼š  ä»¥é”®å€¼å¯¹å­˜å‚¨æ•°æ® å­˜å‚¨çš„æ•°æ®å…·æœ‰å”¯ä¸€æ€§ æ•°æ®æ— åº  æˆ‘ä»¬è¿™æ¬¡ä¸æ˜¯è®²NSDictionaryæˆ–NSMutableDictionaryçš„æ–¹æ³•ï¼Œè¿™äº›åœ¨Apple API Referenceä¸­æŸ¥è¯¢å³å¯äº†è§£å•¦~æˆ‘ä»¬æ¥æ¢ç´¢ä¸‹NSDictionaryçš„å†…éƒ¨">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="è§£è¯»Objective-Cçš„NSDictionary">
<meta property="og:url" content="http://www.yangjie.hu/2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/index.html">
<meta property="og:site_name" content="ColdCode">
<meta property="og:description" content="NSDistionaryæ˜¯éå¸¸ç†Ÿæ‚‰å¸¸ç”¨çš„ä¸€ä¸ªFoundationä¸­çš„ç±»ï¼Œæœ€æ˜¾è‘—çš„å‡ ä¸ªç‰¹ç‚¹æ˜¯ï¼š  ä»¥é”®å€¼å¯¹å­˜å‚¨æ•°æ® å­˜å‚¨çš„æ•°æ®å…·æœ‰å”¯ä¸€æ€§ æ•°æ®æ— åº  æˆ‘ä»¬è¿™æ¬¡ä¸æ˜¯è®²NSDictionaryæˆ–NSMutableDictionaryçš„æ–¹æ³•ï¼Œè¿™äº›åœ¨Apple API Referenceä¸­æŸ¥è¯¢å³å¯äº†è§£å•¦~æˆ‘ä»¬æ¥æ¢ç´¢ä¸‹NSDictionaryçš„å†…éƒ¨">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://jpkc.nwu.edu.cn/sjjg/study_online/book/8/4_2.files/image001.gif">
<meta property="og:updated_time" content="2019-09-10T07:24:08.570Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="è§£è¯»Objective-Cçš„NSDictionary">
<meta name="twitter:description" content="NSDistionaryæ˜¯éå¸¸ç†Ÿæ‚‰å¸¸ç”¨çš„ä¸€ä¸ªFoundationä¸­çš„ç±»ï¼Œæœ€æ˜¾è‘—çš„å‡ ä¸ªç‰¹ç‚¹æ˜¯ï¼š  ä»¥é”®å€¼å¯¹å­˜å‚¨æ•°æ® å­˜å‚¨çš„æ•°æ®å…·æœ‰å”¯ä¸€æ€§ æ•°æ®æ— åº  æˆ‘ä»¬è¿™æ¬¡ä¸æ˜¯è®²NSDictionaryæˆ–NSMutableDictionaryçš„æ–¹æ³•ï¼Œè¿™äº›åœ¨Apple API Referenceä¸­æŸ¥è¯¢å³å¯äº†è§£å•¦~æˆ‘ä»¬æ¥æ¢ç´¢ä¸‹NSDictionaryçš„å†…éƒ¨">
<meta name="twitter:image" content="http://jpkc.nwu.edu.cn/sjjg/study_online/book/8/4_2.files/image001.gif">

<link rel="canonical" href="http://www.yangjie.hu/2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-Hans'
  };
</script>

  <title>è§£è¯»Objective-Cçš„NSDictionary | ColdCode</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130755566-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-130755566-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3fdf633934fb9f62ceee0538975b8820";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ColdCode</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">æ‰˜èµ·ä¸€ç‰‡ç»¿å¶ï¼Œèµ°å‘æ›´è¿œçš„è¿œæ–¹</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://www.yangjie.hu/2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Jakey">
      <meta itemprop="description" content="æ‰˜èµ·ä¸€ç‰‡ç»¿å¶çš„ iOS ä¸´æ—¶å·¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ColdCode">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          è§£è¯»Objective-Cçš„NSDictionary
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-20 11:27:20" itemprop="dateCreated datePublished" datetime="2017-04-20T11:27:20+08:00">2017-04-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-09-10 15:24:08" itemprop="dateModified" datetime="2019-09-10T15:24:08+08:00">2019-09-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/çŒ¿çŒ¿å…»æˆè®°/" itemprop="url" rel="index"><span itemprop="name">çŒ¿çŒ¿å…»æˆè®°</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>NSDistionaryæ˜¯éå¸¸ç†Ÿæ‚‰å¸¸ç”¨çš„ä¸€ä¸ªFoundationä¸­çš„ç±»ï¼Œæœ€æ˜¾è‘—çš„å‡ ä¸ªç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä»¥é”®å€¼å¯¹å­˜å‚¨æ•°æ®</li>
<li>å­˜å‚¨çš„æ•°æ®å…·æœ‰å”¯ä¸€æ€§</li>
<li>æ•°æ®æ— åº</li>
</ul>
<p>æˆ‘ä»¬è¿™æ¬¡ä¸æ˜¯è®²NSDictionaryæˆ–NSMutableDictionaryçš„æ–¹æ³•ï¼Œè¿™äº›åœ¨<a href="https://developer.apple.com/reference/foundation/nsdictionary?language=objc" target="_blank" rel="noopener">Apple API Reference</a>ä¸­æŸ¥è¯¢å³å¯äº†è§£å•¦~<br>æˆ‘ä»¬æ¥æ¢ç´¢ä¸‹NSDictionaryçš„å†…éƒ¨</p>
<a id="more"></a>
<h3 id="Appleæ–‡æ¡£çš„å¯ç¤º"><a href="#Appleæ–‡æ¡£çš„å¯ç¤º" class="headerlink" title="Appleæ–‡æ¡£çš„å¯ç¤º"></a>Appleæ–‡æ¡£çš„å¯ç¤º</h3><p>è‹¹æœè²Œä¼¼å¹¶ä¸æ¨èæˆ‘ä»¬å»ç»§æ‰¿<code>NSDictionary</code>æ¥ä½¿ç”¨å…¶å­ç±»ï¼ˆè‹¹æœå·²ç»å®ç°çš„å­ç±»ï¼š<code>NSMutableDictionary</code>é™¤å¤–ï¼‰</p>
<blockquote>
<p>Before making a custom class of NSDictionary, investigate <strong>NSMapTable</strong> and the corresponding Core Foundation type, <strong>CFDictionary</strong>. Because NSDictionary and CFDictionary are â€œtoll-free bridged,â€ you can substitute a CFDictionary object for a NSDictionary object in your code (with appropriate casting). Although they are corresponding types, CFDictionary and NSDictionary do not have identical interfaces or implementations, and you can sometimes do things with CFDictionary that you cannot easily do with NSDictionary.</p>
<p>If the behavior you want to add supplements that of the existing class, you could write a category on NSDictionary. Keep in mind, however, that this category will be in effect for all instances of NSDictionary that you use, and this might have unintended consequences. Alternatively, you could use composition to achieve the desired behavior.</p>
</blockquote>
<p><em>å¤§è‡´æ„æ€æ˜¯è®©æˆ‘ä»¬æƒ³è¦ç»™<code>NSDictionary</code>æ·»åŠ æ–°åŠŸèƒ½å°±ä½¿ç”¨åˆ†ç±»ï¼Œä¸è¦ç»§æ‰¿å­ç±»ã€‚å¦‚æœæ‰“ç®—è¦ç»§æ‰¿<code>NSDictionary</code>ï¼Œåˆ™éœ€è¦å¥½å¥½ç ”ç©¶ä¸‹<code>NSMapTable</code>å’Œç›¸å¯¹åº”çš„Core Foundationç±»å‹ï¼š<code>CFDictionary</code></em></p>
<p><code>CFDictionary</code>æ˜¯Core Foundationä¸­çš„å­—å…¸ï¼Œå’Œ<code>NSDictionary</code>å¯ä»¥æ— ä»£ä»·è½¬æ¢ï¼Œä¸¤è€…å¯ä»¥äº’ç›¸è°ƒç”¨å¯¹æ–¹çš„æ–¹æ³•åˆ›å»ºå’Œé‡Šæ”¾ã€‚å¯ä»¥ä½¿ç”¨<code>CFDictionary</code>æ¥å®ç°<code>NSDictionary</code>ä¸å®¹æ˜“å®ç°çš„åŠŸèƒ½ã€‚Â·</p>
<p>å¦å¤–è‹¹æœæ¨èè®©æˆ‘ä»¬ç ”ç©¶çš„<a href="https://developer.apple.com/reference/foundation/nsmaptable?language=objc" target="_blank" rel="noopener"><code>NSMapTable</code></a>å…·ä½“æ˜¯ä»€ä¹ˆå‘¢?</p>
<blockquote>
<p>The NSMapTable class is a mutable collection modeled after NSDictionary</p>
</blockquote>
<p>çœ‹åˆ°è¿™å¥è¯åˆšå¼€å§‹æˆ‘æœ‰ç‚¹ä¸è§£ï¼ŒNSMapTableç«Ÿæ˜¯æ¨¡ä»¿NSDictionaryçš„ä¸€ä¸ªå¯å˜å¾—é›†åˆï¼Œé‚£è·ŸNSMutableDictionaryæœ‰ä»€ä¹ˆä¸åŒå•Šï¼Ÿ</p>
<p>NSMapTableä¸NSDictionaryçš„å‡ ä¸ªä¸åŒç‚¹æ˜¯ï¼š</p>
<ul>
<li>å¯ä»¥weakçš„æ–¹å¼æŒæœ‰å¯¹è±¡ï¼Œå½“æŒæœ‰çš„å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™ï¼Œè¯¥å¯¹è±¡ä¼šè‡ªåŠ¨ä»é›†åˆä¸­ç§»é™¤</li>
<li>key å’Œ valueåœ¨è¾“å…¥çš„æ—¶å€™éƒ½å¯ä»¥copyï¼Œä½¿ç”¨æŒ‡é’ˆå¯¹åšisEqualæˆ–è€…hashingå¯¹æ¯”</li>
<li>å¯ä»¥åŒ…å«ä»»ä½•æŒ‡é’ˆï¼Œä¸å†ä»…ä»…å±€é™äºObjective-Cçš„å¯¹è±¡</li>
</ul>
<p>NSMapTableçš„åˆå§‹åŒ–å°±å¯ä»¥æŒ‡å®š key å’Œ value çš„æŒæœ‰æ–¹å¼</p>
<p>è‹¹æœæä¾›äº†å‡ ä¸ªä¾¿æ·çš„å·¥å‚æ–¹æ³•<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//key strongï¼Œ value strong</span></span><br><span class="line">+ (<span class="built_in">NSMapTable</span>&lt;KeyType, ObjectType&gt; *)strongToStrongObjectsMapTable <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_8, <span class="number">6</span>_0);</span><br><span class="line"><span class="comment">//key weakï¼Œ value strong</span></span><br><span class="line">+ (<span class="built_in">NSMapTable</span>&lt;KeyType, ObjectType&gt; *)weakToStrongObjectsMapTable <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_8, <span class="number">6</span>_0); <span class="comment">// entries are not necessarily purged right away when the weak key is reclaimed</span></span><br><span class="line"><span class="comment">//key strongï¼Œ value weak</span></span><br><span class="line">+ (<span class="built_in">NSMapTable</span>&lt;KeyType, ObjectType&gt; *)strongToWeakObjectsMapTable <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_8, <span class="number">6</span>_0);</span><br><span class="line"><span class="comment">//key weakï¼Œ value weak</span></span><br><span class="line">+ (<span class="built_in">NSMapTable</span>&lt;KeyType, ObjectType&gt; *)weakToWeakObjectsMapTable <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_8, <span class="number">6</span>_0); <span class="comment">// entries are not necessarily purged right away when the weak key or object is reclaimed</span></span><br></pre></td></tr></table></figure></p>
<p>æˆ–è€…åƒè¿™æ ·æŒ‡å®šï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿˜å¯ä»¥æŒ‡å®šNSMapTableCopyIn(æ·»åŠ å‰è¿›è¡Œcopy) ï¼Œ æˆ–è€…NSMapTableObjectPointerPersonalityï¼ˆä½¿ç”¨æŒ‡é’ˆå»hashingï¼‰</span></span><br><span class="line"> <span class="built_in">NSMapTable</span> *mapTable = [<span class="built_in">NSMapTable</span> mapTableWithKeyOptions:<span class="built_in">NSMapTableStrongMemory</span> valueOptions:<span class="built_in">NSMapTableWeakMemory</span>];</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//éœ€è¦ä¸€ä¸ªå¯¹è±¡åˆ°å¯¹è±¡çš„æ˜ å°„é›†åˆï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„mapTable</span></span><br><span class="line"> </span><br><span class="line"> <span class="built_in">NSMapTable</span> *objectToObjectMapping = [<span class="built_in">NSMapTable</span> mapTableWithStrongToStrongObjects];</span><br></pre></td></tr></table></figure>
<p>åŒæ ·ç±»æ¨ï¼Œ<a href="https://developer.apple.com/reference/foundation/nshashtable?language=objc" target="_blank" rel="noopener">NSHashTable</a>æ˜¯å¯¹NSSetçš„æ¨¡ä»¿å’Œè¡ç”Ÿï¼Œæ‰©å±•çš„åŠŸèƒ½ä¸NSMapTableç›¸åŒ</p>
<h3 id="æŠ›ä¸¤ä¸ªé—®é¢˜ğŸ™ˆ"><a href="#æŠ›ä¸¤ä¸ªé—®é¢˜ğŸ™ˆ" class="headerlink" title="æŠ›ä¸¤ä¸ªé—®é¢˜ğŸ™ˆ"></a>æŠ›ä¸¤ä¸ªé—®é¢˜ğŸ™ˆ</h3><h5 id="Qï¼šä¸Šåƒçš„å¯¹è±¡å­˜å‚¨åˆ°NSDictionaryæ—¶ï¼Œå‡ºç°æ•ˆç‡ä½ä¸‹çš„é—®é¢˜æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ"><a href="#Qï¼šä¸Šåƒçš„å¯¹è±¡å­˜å‚¨åˆ°NSDictionaryæ—¶ï¼Œå‡ºç°æ•ˆç‡ä½ä¸‹çš„é—®é¢˜æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ" class="headerlink" title="Qï¼šä¸Šåƒçš„å¯¹è±¡å­˜å‚¨åˆ°NSDictionaryæ—¶ï¼Œå‡ºç°æ•ˆç‡ä½ä¸‹çš„é—®é¢˜æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ"></a>Qï¼šä¸Šåƒçš„å¯¹è±¡å­˜å‚¨åˆ°NSDictionaryæ—¶ï¼Œå‡ºç°æ•ˆç‡ä½ä¸‹çš„é—®é¢˜æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ</h5><p>ç›´æ¥å…ˆå›ç­”é—®é¢˜ï¼šå› ä¸ºå­˜å‚¨çš„æ•°é‡å¾ˆå¤šåhashè¡¨ä¼šå‡ºç°æ¯”è¾ƒå¤šçš„å†²çªï¼Œè§£å†³å¤§é‡å†²çªä¼šå ç”¨å¤§é‡CPUèµ„æºï¼Œé€ æˆæ•ˆç‡ä½ä¸‹ã€‚</p>
<p><a href="https://zh.wikipedia.org/wiki/%E5%93%88%E5%B8%8C%E8%A1%A8" target="_blank" rel="noopener">hashè¡¨</a>æ˜¯ä»€ä¹ˆï¼Ÿè·ŸNSDictionaryåˆæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</p>
<p>NSDictionaryæ˜¯ä½¿ç”¨hashè¡¨æ¥å®ç°keyå’Œvalueä¹‹é—´çš„æ˜ å°„å’Œå­˜å‚¨çš„ã€‚</p>
<p>hashè¡¨çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†keyä½œä¸ºå…³é”®å­—ï¼Œæ”¾åˆ°hashå‡½æ•°Æ’(k)ä¸­è®¡ç®—å¾—åˆ°ç»“æœä¸ºhashåœ°å€ï¼Œç„¶åå°†valueå€¼çš„åœ°å€å­˜å‚¨åˆ°hashè¡¨ä¸­çš„Æ’(key)çš„hashåœ°å€ä¸­ã€‚</p>
<p>å½“å…³é”®å­—é›†åˆå¾ˆå¤§çš„æ—¶å€™ï¼Œä¸åŒçš„å…³é”®å­—å¯èƒ½ä¼šé€šè¿‡hashå‡½æ•°æ˜ å°„åˆ°hashè¡¨çš„åŒä¸€åœ°å€ä¸Šã€‚key1 â‰  key2, Æ’(key1) = Æ’(key2),è¿™ç§æƒ…å†µç§°ä¸ºå†²çªã€‚å†²çªæ˜¯ä¸å¯é¿å…çš„ï¼Œåªèƒ½é€šè¿‡æ”¹å–„å“ˆå¸Œå‡½æ•°æ¥å‡å°‘å†²çªã€‚ï¼ˆæ„é€ å“ˆå¸Œå‡½æ•°æ–¹æ³•è¯·å‚è€ƒ<a href="https://zh.wikipedia.org/wiki/%E5%93%88%E5%B8%8C%E8%A1%A8" target="_blank" rel="noopener">è¿™é‡Œ</a>æˆ–æŸ¥æ‰¾å…¶ä»–èµ„æ–™ï¼‰</p>
<p>ç„¶è€Œæœ‰å†²çªå¿…å®šæ˜¯è¦è§£å†³çš„ï¼Œä¸ç„¶æ–°çš„å€¼æ€ä¹ˆå­˜å‚¨åˆ°å“ˆå¸Œè¡¨ä¸­å‘¢ã€‚<br>å¤„ç†å†²çªä¸»è¦æœ‰ï¼ˆæŸ¥çœ‹åŸæ–‡è¯·ç§»æ­¥åº•éƒ¨å‚è€ƒé“¾æ¥ï¼šå“ˆå¸Œè¡¨ï¼‰ï¼š</p>
<ul>
<li><strong>å¼€æ”¾å®šå€æ³•</strong><ul>
<li>çº¿æ€§æ¢æµ‹</li>
<li>å¹³æ–¹æ¢æµ‹</li>
<li>ä¼ªéšæœºæ¢æµ‹</li>
</ul>
</li>
<li><p><strong>å•ç‹¬é“¾è¡¨æ³•</strong></p>
<p>  å°†æ•£åˆ—åˆ°åŒä¸€ä¸ªå­˜å‚¨ä½ç½®çš„æ‰€æœ‰å…ƒç´ ä¿å­˜åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­ã€‚å®ç°æ—¶ï¼Œä¸€ç§ç­–ç•¥æ˜¯æ•£åˆ—è¡¨åŒä¸€ä½ç½®çš„æ‰€æœ‰å†²çªç»“æœéƒ½æ˜¯ç”¨æ ˆå­˜æ”¾çš„ï¼Œæ–°å…ƒç´ è¢«æ’å…¥åˆ°è¡¨çš„å‰ç«¯è¿˜æ˜¯åç«¯å®Œå…¨å–å†³äºæ€æ ·æ–¹ä¾¿ã€‚<br>  <img src="http://jpkc.nwu.edu.cn/sjjg/study_online/book/8/4_2.files/image001.gif" alt></p>
</li>
<li><p><strong>å†å“ˆå¸Œ</strong></p>
<p>  ä¸Šä¸€æ¬¡å“ˆå¸Œè®¡ç®—å‘ç”Ÿå†²çªåï¼Œä½¿ç”¨å¦å¤–çš„å“ˆå¸Œå‡½æ•°è¿›è¡Œå“ˆå¸Œè®¡ç®—çŸ¥é“å†²çªä¸å†å‘ç”Ÿ</p>
</li>
<li><p><strong>å»ºç«‹å…¬å…±æº¢å‡ºåŒº</strong></p>
<p>  ä¸ºå†²çªçš„å“ˆå¸Œåœ°å€å•ç‹¬å»ºç«‹ä¸€å—åŒºåŸŸï¼Œæ‰€æœ‰å†²çªçš„å“ˆå¸Œåœ°å€éƒ½å­˜æ”¾åœ¨æ­¤åŒºåŸŸä¸­</p>
</li>
</ul>
<p>åˆ°è¿™é‡Œä¹Ÿå°±å¯ä»¥æ¨æ–­å‡ºï¼Œå¦‚æœåœ¨NSDictionaryå­˜å–æ—¶å‡ºç°æ•ˆç‡ä½ä¸‹çš„æƒ…å†µï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½æ˜¯ï¼š 1.é¢‘ç¹çš„æ‰©å®¹ 2.å†²çªè¿‡å¤š</p>
<h5 id="Qï¼šNSMapTableæ˜¯æ€æ ·çš„ç»“æ„å‘¢ï¼Ÿ"><a href="#Qï¼šNSMapTableæ˜¯æ€æ ·çš„ç»“æ„å‘¢ï¼Ÿ" class="headerlink" title="Qï¼šNSMapTableæ˜¯æ€æ ·çš„ç»“æ„å‘¢ï¼Ÿ"></a>Qï¼šNSMapTableæ˜¯æ€æ ·çš„ç»“æ„å‘¢ï¼Ÿ</h5><p><strong>å…ˆæ¥çœ‹çœ‹NSMapTableçš„ç»“æ„</strong>(ä»£ç æ¥è‡ªäºcocotron)<br>NSMapTableæ˜¯ä¸€ä¸ªkeyï¼valueçš„å®¹å™¨ï¼Œä¸‹é¢æ˜¯NSMapTableçš„éƒ¨åˆ†ä»£ç ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">   <span class="built_in">NSMapTable</span>        *table;</span><br><span class="line">   <span class="built_in">NSInteger</span>                i;</span><br><span class="line">   <span class="keyword">struct</span> _NSMapNode *j;</span><br><span class="line">&#125; <span class="built_in">NSMapEnumerator</span>;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ç»“æ„ä½“æè¿°äº†éå†ä¸€ä¸ªNSMapTableæ—¶çš„ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«tableå¯¹è±¡è‡ªèº«çš„æŒ‡é’ˆï¼Œè®¡æ•°å€¼ï¼Œå’ŒèŠ‚ç‚¹æŒ‡é’ˆã€‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">   <span class="built_in">NSUInteger</span> (*hash)(<span class="built_in">NSMapTable</span> *table,<span class="keyword">const</span> <span class="keyword">void</span> *);</span><br><span class="line">   <span class="built_in">BOOL</span> (*isEqual)(<span class="built_in">NSMapTable</span> *table,<span class="keyword">const</span> <span class="keyword">void</span> *,<span class="keyword">const</span> <span class="keyword">void</span> *);</span><br><span class="line">   <span class="keyword">void</span> (*<span class="keyword">retain</span>)(<span class="built_in">NSMapTable</span> *table,<span class="keyword">const</span> <span class="keyword">void</span> *);</span><br><span class="line">   <span class="keyword">void</span> (*release)(<span class="built_in">NSMapTable</span> *table,<span class="keyword">void</span> *);</span><br><span class="line">   <span class="built_in">NSString</span>  *(*describe)(<span class="built_in">NSMapTable</span> *table,<span class="keyword">const</span> <span class="keyword">void</span> *);</span><br><span class="line">   <span class="keyword">const</span> <span class="keyword">void</span> *notAKeyMarker;</span><br><span class="line">&#125; <span class="built_in">NSMapTableKeyCallBacks</span>;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ç»“æ„ä½“ä¸­å­˜æ”¾çš„æ˜¯å‡ ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œç”¨äºè®¡ç®—keyçš„hashå€¼ï¼Œåˆ¤æ–­keyæ˜¯å¦ç›¸ç­‰ï¼Œretainï¼Œreleaseæ“ä½œã€‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">   <span class="keyword">void</span>       (*<span class="keyword">retain</span>)(<span class="built_in">NSMapTable</span> *table,<span class="keyword">const</span> <span class="keyword">void</span> *);</span><br><span class="line">   <span class="keyword">void</span>       (*release)(<span class="built_in">NSMapTable</span> *table,<span class="keyword">void</span> *);</span><br><span class="line">   <span class="built_in">NSString</span>  *(*describe)(<span class="built_in">NSMapTable</span> *table, <span class="keyword">const</span> <span class="keyword">void</span> *);</span><br><span class="line">&#125; <span class="built_in">NSMapTableValueCallBacks</span>;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°å­˜æ”¾çš„ä¸‰ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå®šä¹‰åœ¨å¯¹nsmaptableæ’å…¥ä¸€å¯¹keyï¼valueæ—¶ï¼Œå¯¹valueå¯¹è±¡çš„æ“ä½œã€‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSMapTable</span> : <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">   <span class="built_in">NSMapTableKeyCallBacks</span>   *keyCallBacks;</span><br><span class="line">   <span class="built_in">NSMapTableValueCallBacks</span> *valueCallBacks;</span><br><span class="line">   <span class="built_in">NSUInteger</span>             count;</span><br><span class="line">   <span class="built_in">NSUInteger</span>             nBuckets;</span><br><span class="line">   <span class="keyword">struct</span> _NSMapNode  **buckets;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢æ˜¯NSMtabtableçœŸæ­£çš„æè¿°ï¼Œå¯ä»¥çœ‹å‡ºæ¥NSMapTableæ˜¯ä¸€ä¸ªå“ˆå¸Œï¼‹é“¾è¡¨çš„æ•°æ®ç»“æ„(ä¹Ÿå°±æ˜¯ä½¿ç”¨Hashè¡¨ä¸­çš„å•é“¾è¡¨æ³•è§£å†³å†²çª)ï¼Œå› æ­¤åœ¨NSMapTableä¸­æ’å…¥æˆ–è€…åˆ é™¤ä¸€å¯¹å¯¹è±¡æ—¶</p>
<p>å¯»æ‰¾çš„æ—¶é—´æ˜¯Oï¼ˆ1ï¼‰ï¼‹Oï¼ˆmï¼‰ï¼Œmæœ€åæ—¶å¯èƒ½ä¸ºnã€‚</p>
<p> Oï¼ˆ1ï¼‰ï¼šä¸ºå¯¹keyè¿›è¡Œhashå¾—åˆ°bucketçš„ä½ç½®<br> Oï¼ˆmï¼‰ï¼šéå†è¯¥bucketåé¢å†²çªçš„valueï¼Œé€šè¿‡é“¾è¡¨è¿æ¥èµ·æ¥ã€‚</p>
<p>å› æ­¤ï¼šNSDictionaryä¸­çš„key Valueéå†æ—¶æ˜¯æ— åºçš„ï¼Œè‡³å¦‚æŒ‰ç…§ä»€ä¹ˆæ ·çš„é¡ºåºï¼Œè·Ÿhashå‡½æ•°ç›¸å…³ã€‚NSMapTableä½¿ç”¨NSObjectçš„å“ˆå¸Œå‡½æ•°ã€‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="built_in">NSUInteger</span>)hash &#123;</span><br><span class="line">   <span class="keyword">return</span> (<span class="built_in">NSUInteger</span>)<span class="keyword">self</span>&gt;&gt;<span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°æ˜¯NSObjectçš„å“ˆå¸Œå€¼çš„è®¡ç®—æ–¹å¼ï¼Œç®€å•é€šè¿‡ç§»ä½å®ç°ã€‚å³ç§»4ä½ï¼Œå·¦è¾¹è¡¥0.<br>å› ä¸ºå¯¹è±¡å¤§å¤šå­˜äºå †ä¸­ï¼Œåœ°å€ç›¸å·®4ä½åº”è¯¥å¾ˆæ­£å¸¸ã€‚</p>
<p>å‚è€ƒï¼š</p>
<p><a href="http://www.isaced.com/post-235.html" target="_blank" rel="noopener">NSMapTable: more than an NSDictionary for weak pointers</a></p>
<p><a href="https://developer.apple.com/reference/foundation/nsmaptable?language=objc" target="_blank" rel="noopener">Apple API Reference - NSMapTable</a></p>
<p><a href="https://developer.apple.com/reference/foundation/nshashtable?language=objc" target="_blank" rel="noopener">Apple API Reference - NSHashTable</a></p>
<p><a href="https://zh.wikipedia.org/wiki/%E5%93%88%E5%B8%8C%E8%A1%A8" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘ - å“ˆå¸Œè¡¨</a>(éœ€è¦ç¿»ä¸‹å¢™ï¼Œä¹Ÿå¯ä»¥é—®ä¸‹åº¦å¨˜)</p>
<p><a href="http://ibloodline.com/articles/2016/07/11/NSDictionary.html" target="_blank" rel="noopener">å…³äºNSDictionary</a></p>
<p><a href="http://www.cnblogs.com/doudouyoutang/p/4379068.html" target="_blank" rel="noopener">NSDictionary çš„å†…éƒ¨å®ç°</a></p>
<p><em>ã€ŠObjective-Cé«˜çº§ç¼–ç¨‹ï¼šiOSä¸OS Xå¤šçº¿ç¨‹å’Œå†…å­˜ç®¡ç†ã€‹ ARCçš„å®ç°</em></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>Jakey
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="http://www.yangjie.hu/2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/" title="è§£è¯»Objective-Cçš„NSDictionary">http://www.yangjie.hu/2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/iOS/" rel="tag"># iOS</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/03/29/removeFromSuperViewæµ…è°ˆ/" rel="prev" title="removeFromSuperViewæµ…è°ˆ">
      <i class="fa fa-chevron-left"></i> removeFromSuperViewæµ…è°ˆ
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/04/28/å¤šç¡è§‰å¤šè¯»ä¹¦/" rel="next" title="å¤šç¡è§‰å¤šè¯»ä¹¦">
      å¤šç¡è§‰å¤šè¯»ä¹¦ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Appleæ–‡æ¡£çš„å¯ç¤º"><span class="nav-number">1.</span> <span class="nav-text">Appleæ–‡æ¡£çš„å¯ç¤º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æŠ›ä¸¤ä¸ªé—®é¢˜ğŸ™ˆ"><span class="nav-number">2.</span> <span class="nav-text">æŠ›ä¸¤ä¸ªé—®é¢˜ğŸ™ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Qï¼šä¸Šåƒçš„å¯¹è±¡å­˜å‚¨åˆ°NSDictionaryæ—¶ï¼Œå‡ºç°æ•ˆç‡ä½ä¸‹çš„é—®é¢˜æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ"><span class="nav-number">2.0.1.</span> <span class="nav-text">Qï¼šä¸Šåƒçš„å¯¹è±¡å­˜å‚¨åˆ°NSDictionaryæ—¶ï¼Œå‡ºç°æ•ˆç‡ä½ä¸‹çš„é—®é¢˜æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Qï¼šNSMapTableæ˜¯æ€æ ·çš„ç»“æ„å‘¢ï¼Ÿ"><span class="nav-number">2.0.2.</span> <span class="nav-text">Qï¼šNSMapTableæ˜¯æ€æ ·çš„ç»“æ„å‘¢ï¼Ÿ</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jakey"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Jakey</p>
  <div class="site-description" itemprop="description">æ‰˜èµ·ä¸€ç‰‡ç»¿å¶çš„ iOS ä¸´æ—¶å·¥</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="sidebar-button motion-element">
    <a onclick="tidioChatApi.open();"><i class="fa fa-comment"></i>
    Cue ä¸€ä¸‹åšä¸»
  </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/HuyangJake" title="GitHub â†’ https://github.com/HuyangJake" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jakey_yang@hotmail.com" title="E-Mail â†’ mailto:jakey_yang@hotmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/joybook_jake" title="Twitter â†’ https://twitter.com/joybook_jake" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://note.huyangjie.cn" title="http://note.huyangjie.cn" rel="noopener" target="_blank">Jakey's NoteBook</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="/">æ¬¢è¿æ·»åŠ å‹é“¾</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="http://www.beian.miit.gov.cn" rel="noopener" target="_blank">æµ™ICPå¤‡ </a>
      <img src="http://qiniu.huyangjie.cn/beian_icon.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=18046274" rel="noopener" target="_blank">18046274å·-1 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jakey</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        




  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js"></script>
  <script>
    firebase.initializeApp({
      apiKey   : 'AIzaSyAvEXXeZOzeqxIclVMOOgwjMTwYTkrJwcA',
      projectId: 'joybookr43ce'
    });

    function getCount(doc, increaseCount) {
      // IncreaseCount will be false when not in article page
      return doc.get().then(d => {
        var count = 0;
        if (!d.exists) { // Has no data, initialize count
          if (increaseCount) {
            doc.set({
              count: 1
            });
            count = 1;
          }
        } else { // Has data
          count = d.data().count;
          if (increaseCount) {
            // If first view this article
            doc.set({ // Increase count
              count: count + 1
            });
            count++;
          }
        }

        return count;
      });
    }

    function appendCountTo(el) {
      return count => {
        el.innerText = count;
      }
    }
  </script>
  <script>
    (function() {
      var db = firebase.firestore();
      var articles = db.collection('articles');

      if (CONFIG.page.isPost) { // Is article page
        var title = document.querySelector('.post-title').innerText.trim();
        var doc = articles.doc(title);
        var increaseCount = CONFIG.hostname === location.hostname;
        if (localStorage.getItem(title)) {
          increaseCount = false;
        } else {
          // Mark as visited
          localStorage.setItem(title, true);
        }
        getCount(doc, increaseCount).then(appendCountTo(document.querySelector('.firestore-visitors-count')));
      } else if (CONFIG.page.isHome) { // Is index page
        var promises = [...document.querySelectorAll('.post-title')].map(element => {
          var title = element.innerText.trim();
          var doc = articles.doc(title);
          return getCount(doc);
        });
        Promise.all(promises).then(counts => {
          var metas = document.querySelectorAll('.firestore-visitors-count');
          counts.forEach((val, idx) => {
            appendCountTo(metas[idx])(val);
          });
        });
      }
    })();
  </script>




      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>



  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script src="/js/local-search.js"></script>





  <script src="//code.tidio.co/crw9hhfsastwovfcz27hdd14dtxqoqkc.js"></script>



<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'http://www.yangjie.hu/2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/',]
      });
      });
  </script>

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://coldreading-1.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "http://www.yangjie.hu/2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/";
    this.page.identifier = "2017/04/20/è§£è¯»Objective-Cçš„NSDictionary/";
    this.page.title = "è§£è¯»Objective-Cçš„NSDictionary";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://coldreading-1.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
