<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.yangjie.hu","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":null,"activeClass":"disqus"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="开屏广告  emmm… 是个老生常谈的功能需求了。脑子里印象就是个很简单的需求，YY了一下实现的方式，我想到的方案大概是：  在 didFinishLaunchingWithOptions 方法中切换window的rootViewController为启动广告页面，倒计时完成之后再切为正常的 rootViewController，其中再注意下处理图片缓存的存储和读取的操作。 至于展示效果，加点动效">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS开屏广告方案 （Idea vs Reality）">
<meta property="og:url" content="http://www.yangjie.hu/2019/03/15/iOS-new-launch-shceme/index.html">
<meta property="og:site_name" content="ColdCode">
<meta property="og:description" content="开屏广告  emmm… 是个老生常谈的功能需求了。脑子里印象就是个很简单的需求，YY了一下实现的方式，我想到的方案大概是：  在 didFinishLaunchingWithOptions 方法中切换window的rootViewController为启动广告页面，倒计时完成之后再切为正常的 rootViewController，其中再注意下处理图片缓存的存储和读取的操作。 至于展示效果，加点动效">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://note.huyangjie.cn/media/15526478756852/pic1.png">
<meta property="og:updated_time" content="2019-09-10T07:24:08.562Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS开屏广告方案 （Idea vs Reality）">
<meta name="twitter:description" content="开屏广告  emmm… 是个老生常谈的功能需求了。脑子里印象就是个很简单的需求，YY了一下实现的方式，我想到的方案大概是：  在 didFinishLaunchingWithOptions 方法中切换window的rootViewController为启动广告页面，倒计时完成之后再切为正常的 rootViewController，其中再注意下处理图片缓存的存储和读取的操作。 至于展示效果，加点动效">
<meta name="twitter:image" content="http://note.huyangjie.cn/media/15526478756852/pic1.png">

<link rel="canonical" href="http://www.yangjie.hu/2019/03/15/iOS-new-launch-shceme/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>iOS开屏广告方案 （Idea vs Reality） | ColdCode</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130755566-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-130755566-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3fdf633934fb9f62ceee0538975b8820";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ColdCode</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">托起一片绿叶，走向更远的远方</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.yangjie.hu/2019/03/15/iOS-new-launch-shceme/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Jakey">
      <meta itemprop="description" content="托起一片绿叶的 iOS 临时工">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ColdCode">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          iOS开屏广告方案 （Idea vs Reality）
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-15 19:04:51" itemprop="dateCreated datePublished" datetime="2019-03-15T19:04:51+08:00">2019-03-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-10 15:24:08" itemprop="dateModified" datetime="2019-09-10T15:24:08+08:00">2019-09-10</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/03/15/iOS-new-launch-shceme/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/15/iOS-new-launch-shceme/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><strong>开屏广告</strong>  emmm… 是个老生常谈的功能需求了。脑子里印象就是个很简单的需求，YY了一下实现的方式，我想到的方案大概是：</p>
<blockquote>
<p>在 <code>didFinishLaunchingWithOptions</code> 方法中切换<code>window</code>的<code>rootViewController</code>为启动广告页面，倒计时完成之后再切为正常的 <code>rootViewController</code>，其中再注意下处理图片缓存的存储和读取的操作。</p>
<p>至于展示效果，加点动效的事情而已啦。修改rootViewController效果不好的话，想办法在window上加一个view展示咯，再不行使用一个新的window咯</p>
</blockquote>
<a id="more"></a>
<p>终于在项目的这一次需求中要添加启动广告，我可以实现脑子里YY的功能了。<br>这里先列一下需求方给的详细需求：</p>
<blockquote>
<ol>
<li>启动广告只需要在App启动的时候展示，倒计时3秒</li>
<li>App支持读取缓存展示启动广告、异步更新广告</li>
<li>控制App是否强制展示此次返回的启动广告</li>
<li>点击广告跳转到活动落地页，落地页返回到App首页</li>
</ol>
</blockquote>
<p>作为处女座的我，针对细节私自定了些额外的需求：</p>
<blockquote>
<p>a. 开屏广告上不展示状态栏<br>b. 广告展示完成之后跳转到首页不那么突兀(首页需要已经加载完成)</p>
</blockquote>
<h3 id="方案实现"><a href="#方案实现" class="headerlink" title="方案实现"></a>方案实现</h3><p>假设如下是服务端返回的开屏广告控制接口。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"code"</span>: <span class="number">200</span>,</span><br><span class="line">	<span class="attr">"msg"</span>: <span class="string">"SUCCESS"</span>,</span><br><span class="line">	<span class="attr">"data"</span>: &#123;</span><br><span class="line">		<span class="attr">"hasAd"</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">"id"</span>: <span class="number">231</span>,</span><br><span class="line">		<span class="attr">"imgUrl"</span>: <span class="string">"http://jakey.test.png"</span>,</span><br><span class="line">		<span class="attr">"jumpType"</span>: <span class="string">"url"</span>,</span><br><span class="line">		<span class="attr">"jumpValue"</span>: <span class="string">"https://www.baidu.com/"</span>,</span><br><span class="line">		<span class="attr">"showMoment"</span>: <span class="number">0</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我创建了一个<code>LaunchAdManager</code>很快实现了切换<code>rootViewController</code>的方案，通过<code>SDWebImage</code>下载缓存图片，使用服务端的唯一字段<code>id</code>当做key缓存到内存和磁盘，不详细描述方案，具体流程见我的时序图，如下图：</p>
<p><img src="http://note.huyangjie.cn/media/15526478756852/pic1.png" alt="pi"></p>
<p>最后的效果非常地生硬，两个rootViewController之间的切换就像是在打架…</p>
<hr>
<h3 id="寻找新方案"><a href="#寻找新方案" class="headerlink" title="寻找新方案"></a>寻找新方案</h3><p>既然这样只能往 <strong>在首页所在的window上添加新的view</strong> 的方案上进行靠了。 方案的对比优劣可以在 参考列表中查看<a href="#ref">[2]</a></p>
<p>我想到首页会有一个加载数据的过程，需要控制view在window上展示会不会跟其他的高优先级的弹窗冲突。以及这样会不会对业务会有所影响。</p>
<p>还是像键盘一样通过一个新的window对象展示出我们的启动广告就不会对原有业务有什么影响。</p>
<p>因为启动页是否展示需要请求接口，展示读取在线图片或是缓存图片也会需要一点时间。另外还需要有一点考虑的是，原本业务的首页需要在什么时机进行展示。如果太早，App启动会先进入业务首页，再出现开屏广告。如果太晚，开屏广告完成之后还没有加载完首页的数据，又达不到我定的需求 <strong>b</strong> 。所以我设计了如下接口：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 检查是否需要展示广告</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> @param completeHandler 判断接口请求完成</span></span><br><span class="line"><span class="comment"> @param finishedAction 倒计时完成</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)checkIfNeedLaunchAdLoadComplete:(<span class="keyword">void</span>(^)())completeHandler</span><br><span class="line">                          countFinished:(<span class="keyword">void</span>(^)(<span class="built_in">BOOL</span> isSkiped))finishedAction;</span><br></pre></td></tr></table></figure>
<p>在开屏广告接口请求完成之后就进行加载首页，此时新的window也已经被加载出来了，就不会出现前后不衔接的情况。</p>
<p>简单列一下关键代码</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIWindow</span> *adWindow = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[<span class="built_in">UIScreen</span> mainScreen].bounds];</span><br><span class="line">THKLaunchClearViewController *vc = [[THKLaunchClearViewController alloc] init];</span><br><span class="line">adWindow.rootViewController = vc;</span><br><span class="line">adWindow.windowLevel = <span class="built_in">UIWindowLevelStatusBar</span> + <span class="number">1</span>;</span><br><span class="line">adWindow.hidden = <span class="literal">NO</span>;</span><br><span class="line">adWindow.alpha = <span class="number">1</span>;</span><br><span class="line">[adWindow addSubview:rootVC.view];</span><br></pre></td></tr></table></figure>
<p>关于 UIWindow 有只要创建了，它的hidden属性默认就是YES。在<code>makeKeyAndVisible</code>方法的注释中有这么写：</p>
<blockquote>
<p>Shows the window and makes it the key window.</p>
<p>This is a convenience method to show the current window and position it in front of all other windows at the same level or lower. If you only want to show the window, change its hidden property to NO.</p>
</blockquote>
<p>我们只是展示这个新的window，不是将其替换为keywindow, 那么只需要将其hidden的属性置为NO。</p>
<p>在展示完成之后，记得将新创建的window对象上的所有视图和其本身进行销毁。</p>
<hr>
<p>想要直接使用现成的开屏广告组件？推荐使用文章底部参考链接中的 <a href="#ref">[1]</a> 三方库，看了其实现的源码，虽然写得比较重稍显啰嗦，但功能全、效果不错，其star数经得起实战考验了。</p>
<p>在源码中看到了一种无痛接入的实现方式，先解释下无痛是什么概念：使用三方库不需要额外写任何代码，只要将库文件拖入工程就完成功能的实现。</p>
<p>具体实现的代码如下，通过重写类的load方法，因为类的load方法必定会执行，所以可以确保里面的代码执行。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">+(<span class="keyword">void</span>)load&#123;</span><br><span class="line">    [<span class="keyword">self</span> shareManager];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+(XHLaunchAdManager *)shareManager&#123;</span><br><span class="line">    <span class="keyword">static</span> XHLaunchAdManager *instance = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> oneToken;</span><br><span class="line">    <span class="built_in">dispatch_once</span>(&amp;oneToken,^&#123;</span><br><span class="line">        instance = [[XHLaunchAdManager alloc] init];</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)init&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="comment">//在UIApplicationDidFinishLaunching时初始化开屏广告,做到对业务层无干扰,当然你也可以直接在AppDelegate didFinishLaunchingWithOptions方法中初始化</span></span><br><span class="line">        [[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserverForName:<span class="built_in">UIApplicationDidFinishLaunchingNotification</span> object:<span class="literal">nil</span> queue:<span class="literal">nil</span> usingBlock:^(<span class="built_in">NSNotification</span> * _Nonnull note) &#123;</span><br><span class="line">            <span class="comment">//初始化开屏广告</span></span><br><span class="line">            [<span class="keyword">self</span> setupXHLaunchAd];</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a><span id="ref">参考</span></h3><p>[1].<a href="https://github.com/CoderZhuXH/XHLaunchAd" target="_blank" rel="noopener">XHLaunchAd GitHub</a><br>[2]. <a href="https://my.oschina.net/zhxx/blog/910836" target="_blank" rel="noopener">iOS开屏广告&amp;弹窗浮层解决方案</a></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Jakey
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://www.yangjie.hu/2019/03/15/iOS-new-launch-shceme/" title="iOS开屏广告方案 （Idea vs Reality）">http://www.yangjie.hu/2019/03/15/iOS-new-launch-shceme/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/iOS/" rel="tag"># iOS</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/12/03/memory-measure/" rel="prev" title="iOS/MacOS内存的测量">
      <i class="fa fa-chevron-left"></i> iOS/MacOS内存的测量
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/03/21/Swift-Codable/" rel="next" title="Swift Codable体验">
      Swift Codable体验 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#方案实现"><span class="nav-number">1.</span> <span class="nav-text">方案实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#寻找新方案"><span class="nav-number">2.</span> <span class="nav-text">寻找新方案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考"><span class="nav-number">3.</span> <span class="nav-text">参考</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jakey"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Jakey</p>
  <div class="site-description" itemprop="description">托起一片绿叶的 iOS 临时工</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/HuyangJake" title="GitHub → https://github.com/HuyangJake" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jakey_yang@hotmail.com" title="E-Mail → mailto:jakey_yang@hotmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/joybook_jake" title="Twitter → https://twitter.com/joybook_jake" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://note.huyangjie.cn" title="http://note.huyangjie.cn" rel="noopener" target="_blank">Jakey's NoteBook</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="/">欢迎添加友链</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="http://www.beian.miit.gov.cn" rel="noopener" target="_blank">浙ICP备 </a>
      <img src="http://qiniu.huyangjie.cn/beian_icon.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=18046274" rel="noopener" target="_blank">18046274号-1 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jakey</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>



  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script src="/js/local-search.js"></script>








<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'http://www.yangjie.hu/2019/03/15/iOS-new-launch-shceme/',]
      });
      });
  </script>

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://coldreading-1.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "http://www.yangjie.hu/2019/03/15/iOS-new-launch-shceme/";
    this.page.identifier = "2019/03/15/iOS-new-launch-shceme/";
    this.page.title = "iOS开屏广告方案 （Idea vs Reality）";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://coldreading-1.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
